<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crypto Signal Dashboard</title>

  <!-- FONTS AUS indexOLD -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- DEINE CSS DATEIEN -->
  <link rel="stylesheet" href="assets/css/variables.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/animations.css">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>

<div class="container">

  <!-- ===== HEADER ===== -->
  <header>
    <div class="logo">
      <div class="logo-icon">◈</div>
      <div>
        <h1>CRYPTO SIGNAL</h1>
        <p>DAYTRADER DASHBOARD</p>
      </div>
    </div>

    <div class="header-right">
      <div class="live-badge">
        <span class="live-dot"></span>
        LIVE
      </div>
      <div class="timestamp" id="timestamp">--:--:--</div>
    </div>
  </header>

  <!-- ===== GRID ===== -->
  <div id="coinGrid" class="grid"></div>

  <div class="footer">
    Binance Live Data • Auto Refresh 15s
  </div>

</div>


<!-- ===== SCRIPT ===== -->
<script type="module">
import { fetchBinancePrices } from "./src/api/binance.js";

const grid = document.getElementById("coinGrid");
const timeEl = document.getElementById("timestamp");

function updateTime() {
  const now = new Date();
  timeEl.textContent = now.toLocaleTimeString();
}
setInterval(updateTime, 1000);
updateTime();

function createCard(coin) {
  const changeClass = coin.change >= 0 ? "up" : "down";

  const el = document.createElement("div");
  el.className = "card";
  el.innerHTML = `
    <div class="symbol">${coin.symbol}</div>
    <div class="price">$ ${Number(coin.price).toLocaleString()}</div>
    <div class="${changeClass}">
      ${coin.change >= 0 ? "+" : ""}${coin.change}%
    </div>
  `;
  return el;
}

async function loadData() {
  try {
    const data = await fetchBinancePrices();

    grid.innerHTML = "";

    data.slice(0, 12).forEach(coin => {
      grid.appendChild(createCard(coin));
    });

  } catch (e) {
    console.error("Fehler beim Laden:", e);
  }
}

loadData();
setInterval(loadData, 15000);
</script>

</body>
</html>
